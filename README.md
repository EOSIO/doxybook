# doxybook

This python tool will take an xml output generated by the Doxygen and converts that into markdown to be used by GitBook.

## Live Demo

See live demo here: <https://matusnovak.github.io/doxybook/docs/api/classexample_1_1_animal.html> 

Alternativelly, the markdown files are located here: <https://github.com/matusnovak/doxybook/tree/master/example/docs/api> and the doxygen original html output (for comparison) is here: <https://github.com/matusnovak/doxybook/tree/master/example/temp/html>

## Example

The [Live Demo](https://matusnovak.github.io/doxybook/docs/api/classexample_1_1_animal.html) is generated from the `example` folder.

## Requirements

You need to have **python 3.5 or newer**. No additional python packages necessary, only the ones included by default in python itself.

## Installation

```
git clone https://github.com/matusnovak/doxybook.git
cd doxybook
sudo python setup.py install
```

To verify doxybook has installed properly, run:

```
doxybook -h
```

And you should see:

```
usage: doxybook [-h] -i INPUT -o OUTPUT [-s SUMMARY] [-d DEBUG]
                [--noindex NOINDEX]

Convert doxygen XML output into GitBook markdown output.

optional arguments:
  -h, --help            show this help message and exit
  -i INPUT, --input INPUT
                        Path to doxygen generated xml folder
  -o OUTPUT, --output OUTPUT
                        Path to the destination folder
  -s SUMMARY, --summary SUMMARY
                        Path to the summary file which contains a link to
                        index.md in the folder pointed by --input
  -d DEBUG, --debug DEBUG
                        Debug the class hierarchy
  --noindex NOINDEX     If set to true, adds section at the top of the file to
                        disable indexing for all generated files
```

## Usage

1. First, create your Doxyfile. I am not going to tell you how, there are plenty of tutorials out there.
2. Set `GENERATE_XML = YES` and `XML_OUTPUT = xml` in the Doxyfile, and don't forget about `OUTPUT_DIRECTORY = temp`.
3. Run the doxygen via `doxygen Doxyfile` 
4. Create your initial GitBook.
6. Create an empty folder where the markdown files should be generated. For the purpose of this example, we will put it in the `docs/api` folder. 
5. (optional) In your `SUMMARY.md` create a link to the `docs/api/index.md` with any text, for example: `* [Lorem Ipsum](docs/api/index.md)`. This file can be any kind of markdown file. However, the file `index.md` needs to be inside the folder where the markdown files are going to be generated. Doxybook will find this link and will generated a **sub-list** below that markdown link. Anything you have written after the `* [Lorem Ipsum](docs/api/index.md)` will not be affected, only the sub-list items. Note that if you put any list item or sub-lists of `* [Lorem Ipsum](docs/api/index.md)` they will be REMOVED!
6. Run doxybook as: `doxybook -i temp/xml -o docs/api -s SUMMARY.md` (paths are relative) The `-s SUMMARY.md` is optional, if you provide a vaid path to the SUMMARY.md file then the doxybook will alter the contents with links to generated markdown files.
7. Then build your GitBook as: `gitbook build`, or serve it as `gitbook serve` and go to `http://localhost:4000`, or upload the contents of `_book` folder into gh-pages on GitHub.

## How does the SUMMARY.md work here?

GitBook has a big fault that anything not listed in `SUMMARY.md` will get ignored. Therefore the doxybook needs to alter the `SUMMARY.md`. Yes, this is optional, in case GitBook will be fixed in the future. 

For example, given this summary file:

```
# Summary

* [Introduction](README.md)
* [Documentation](docs/api/index.md)
  * [This will get deleted](whatever.md)
* [Something else](something-else.md)
* [Go to my website](http://mywebsite.com/)
```

After running doxybook, the summary will become this:

```

```
# Summary

* [Introduction](README.md)
* [Documentation](docs/api/index.md)
  * [Related Pages](docs/api/pages.md)
    * [Bug List](docs/api/bug.md)
    * [My Personal Index Page](docs/api/indexpage.md)
    * [Markdown test](docs/api/md_src_markdown-demo.md)
    * [Test List](docs/api/test.md)
    * [Todo List](docs/api/todo.md)
  * [Modules](docs/api/modules.md)
    * [animals](docs/api/group__animals.md)
  * [Class Index](docs/api/classes.md)
  * [Class List](docs/api/annotated.md)
    * [namespace example](docs/api/namespaceexample.md)
      * [class Animal](docs/api/classexample_1_1_animal.md)
        * [struct Result](docs/api/structexample_1_1_animal_1_1_result.md)
      * [class Bird](docs/api/classexample_1_1_bird.md)
      * [class CustomException](docs/api/classexample_1_1_custom_exception.md)
      * [class SpecialBird](docs/api/classexample_1_1_special_bird.md)
  * [Files](docs/api/files.md)
    * [src/](docs/api/dir_68267d1309a1af8e8297ef4c3efbcdba.md)
      * [animal.h](docs/api/animal_8h.md)
      * [animal.h - source](docs/api/animal_8h_source.md)
      * [bird.h](docs/api/bird_8h.md)
      * [bird.h - source](docs/api/bird_8h_source.md)
      * [example.h](docs/api/example_8h.md)
      * [example.h - source](docs/api/example_8h_source.md)
      * [special_bird.h](docs/api/special__bird_8h.md)
      * [special_bird.h - source](docs/api/special__bird_8h_source.md)
      * [utils/](docs/api/dir_313caf1132e152dd9b58bea13a4052ca.md)
        * [exception.h](docs/api/exception_8h.md)
        * [exception.h - source](docs/api/exception_8h_source.md)
* [Something else](something-else.md)
* [Go to my website](http://mywebsite.com/)
```